# 条件变量和信号量对比

## 性能对比

这里的性能指在多线程环境下，从A线程发出信号到B接收信号后的时效性。

经实测在linux环境下，条件变量的性能要比信号量的性能要好很多，条件变量的性能几乎是信号量的两倍。

## 信号量的缺点

信号量使用的时钟是本地时间而不是系统的单调时钟，所以如果系统时间被修改了，那么信号量的时效性就会受到影响。

## 总结

1. 条件变量的性能要比信号量的性能要好
2. 条件变量和互斥锁结合可以实现信号量的功能
3. 信号量使用本地时间，当本地时间修改后或者同步后会产生一些莫名其妙的超时问题，进而影响程序的运行逻辑。

所以在任何情况下都应该优先使用条件变量，而不是信号量。并且永远使用单调时钟来计算超时时间。
